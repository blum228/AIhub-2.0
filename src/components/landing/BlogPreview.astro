---
/**
 * Секция превью блога для landing page
 * Отображает до 3 последних постов
 * Requirements: 1.5
 */
import Sequence from '../Sequence.astro';
import SequenceItem from '../SequenceItem.astro';
import BlogCard from '../blog/BlogCard.astro';
import { getRecentBlogPosts } from '../../lib/blog';

interface Props {
  title?: string;
  count?: number;
}

const { title = 'Из блога', count = 3 } = Astro.props;

const posts = await getRecentBlogPosts(count);
---

{posts.length > 0 && (
  <section class="blog-preview">
    <div class="blog-preview__header">
      <h2 class="blog-preview__title">{title}</h2>
      <a href="/blog" class="blog-preview__link">Все статьи →</a>
    </div>
    <Sequence size="L" gap="M">
      {posts.map(post => (
        <SequenceItem>
          <BlogCard post={post} />
        </SequenceItem>
      ))}
    </Sequence>
  </section>
)}

<style>
  .blog-preview__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.2em;
  }

  .blog-preview__title {
    margin: 0;
  }

  .blog-preview__link {
    color: rgba(var(--ids__text-RGB), 0.6);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.5s ease;
  }

  .blog-preview__link:hover {
    color: rgb(var(--ids__text-RGB));
    transition: color 0s ease;
  }
</style>
