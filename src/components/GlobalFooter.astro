---
/**
 * Глобальный футер сайта
 * Отображается на всех страницах с навигацией и категориями
 * Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 9.1, 9.3, 9.4
 */
import { getCollection } from 'astro:content';
import Wrapper from './Wrapper.astro';
import Space from './Space.astro';
import { sortCollectionsByOrder, type CollectionData } from '../lib/collections';

interface Props {
  class?: string;
}

const { class: className } = Astro.props;

// Get all collections for category links
const collectionsEntries = await getCollection('collections');
const collections: CollectionData[] = sortCollectionsByOrder(
  collectionsEntries.map(entry => ({
    slug: entry.slug,
    ...entry.data
  }))
);

const currentYear = new Date().getFullYear();
---

<footer class:list={['global-footer', className]}>
  <Wrapper>
    <Space size="L" />
    
    <section>
      <h4 class="global-footer__title">Навигация</h4>
      <p>
        <a href="/">Главная</a> · 
        <a href="/catalog">Каталог</a> · 
        <a href="/blog">Блог</a> · 
        <a href="/about">О нас</a>
      </p>
    </section>

    <Space size="M" />

    <section>
      <h4 class="global-footer__title">Категории</h4>
      <p>
        {collections.map((col, i) => (
          <>
            {i > 0 && ' · '}
            <a href={`/category/${col.slug}`}>{col.icon} {col.title}</a>
          </>
        ))}
      </p>
    </section>

    <Space size="M" />

    <aside>
      <h4 class="global-footer__title">AI Каталог СНГ</h4>
      <p>
        Лучшие AI-сервисы с фильтрами по оплате картами РФ, поддержке русского языка и доступности без VPN.
      </p>
    </aside>

    <Space size="L" />

    <p class="global-footer__copyright">
      © {currentYear} AI Каталог СНГ. Все права защищены.
    </p>
    <p class="global-footer__disclaimer">
      Сайт содержит материалы 18+. Используя сайт, вы подтверждаете своё совершеннолетие.
    </p>
  </Wrapper>
</footer>

<style>
  .global-footer {
    background: rgba(var(--ids__surface-RGB), 0.5);
  }

  .global-footer__title {
    font-size: 0.9em;
    font-weight: 600;
    margin: 0 0 0.3em;
    opacity: 0.7;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .global-footer__copyright {
    font-size: 0.85em;
    opacity: 0.6;
    margin: 0;
  }

  .global-footer__disclaimer {
    font-size: 0.8em;
    opacity: 0.5;
    margin: 0.5em 0 0;
  }
</style>
