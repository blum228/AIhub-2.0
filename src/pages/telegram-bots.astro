---
import { getCollection } from 'astro:content';
import CatalogLayout from '../layouts/CatalogLayout.astro';
import ToolGrid from '../components/catalog/ToolGrid.astro';
import Space from '../components/Space.astro';
import { sortToolsByRating } from '../lib/tools';
import type { ToolData } from '../lib/types';

// –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
const toolsCollection = await getCollection('tools');

// –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ Telegram –±–æ—Ç—ã
const telegramBots: ToolData[] = toolsCollection
  .filter(entry => entry.data.tags.includes('telegram-bot'))
  .map(entry => ({
    slug: entry.slug,
    ...entry.data
  }));

// –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
const sortedBots = sortToolsByRating(telegramBots);
---

<CatalogLayout
  title="Telegram –±–æ—Ç—ã"
  description="AI-–±–æ—Ç—ã –¥–ª—è Telegram: —Ä–æ–ª–µ–ø–ª–µ–π, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —á–∞—Ç-–±–æ—Ç—ã. –†–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ VPN –ø—Ä—è–º–æ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ."
>
  <section class="page-header">
    <h1>ü§ñ Telegram –±–æ—Ç—ã</h1>
    <p class="page-header__subtitle">
      AI-–±–æ—Ç—ã –ø—Ä—è–º–æ –≤ Telegram. –ù–µ –Ω—É–∂–µ–Ω VPN, —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –ª—é–±–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.
    </p>
  </section>

  <Space size="M" />

  {sortedBots.length > 0 ? (
    <ToolGrid tools={sortedBots} />
  ) : (
    <div class="empty-state">
      <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö Telegram –±–æ—Ç–æ–≤.</p>
      <a href="/">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
    </div>
  )}
</CatalogLayout>

<style>
  .page-header {
    text-align: center;
    padding: 1em 0;
  }

  .page-header h1 {
    font-size: 2em;
    margin-bottom: 0.3em;
  }

  .page-header__subtitle {
    font-size: 1.1em;
    opacity: 0.8;
  }

  .empty-state {
    text-align: center;
    padding: 3em;
    background: rgb(var(--ids__surface-RGB));
    border-radius: var(--ids__radius);
  }

  .empty-state p {
    margin-bottom: 1em;
    opacity: 0.7;
  }
</style>
